<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Exposing CSS Hidden Complexities with React &#8211; Ryan Oglesby</title>
    <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com">
    <link rel="dns-prefetch" href="//cdn.mathjax.org">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="My thoughts and experiences as I navigate the world of Agile software development.">
    <meta name="robots" content="all">
    <meta name="author" content="Ryan Oglesby">
    
    <meta name="keywords" content="css, javascript, react">
    <link rel="canonical" href="http://ryanogles.by/css/javascript/react/2017/11/17/exposing-css-hidden-complexities-with-react.html">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Ryan Oglesby" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/assets/css/styles.css?201711191751" type="text/css">
    <link href='/stylesheets/all-e96e70bbb78ca0af094b24259e4b32a9.css' media='all' rel='stylesheet' type='text/css'>

    <!-- Fonts -->
    
    <link href='//fonts.googleapis.com/css?family=Open+Sans:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    

    <!-- MathJax -->
    

    <!-- Verifications -->
    
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Exposing CSS Hidden Complexities with React">
    <meta property="og:description" content="My thoughts and experiences as I navigate the world of Agile software development.">
    <meta property="og:url" content="http://ryanogles.by/css/javascript/react/2017/11/17/exposing-css-hidden-complexities-with-react.html">
    <meta property="og:site_name" content="Ryan Oglesby">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@ryanoglesby08" />
    
    <meta name="twitter:title" content="Exposing CSS Hidden Complexities with React" />
    <meta name="twitter:description" content="My thoughts and experiences as I navigate the world of Agile software development." />
    <meta name="twitter:url" content="http://ryanogles.by/css/javascript/react/2017/11/17/exposing-css-hidden-complexities-with-react.html" />

    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-51481422-1', 'auto');
       ga('send', 'pageview');
    </script>
    
</head>
<body class="site">
  
	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://ryanogles.by" class="site-title">Ryan Oglesby</a>
      <nav class="site-nav">
        <a href="/about.html">Me</a>
<a href="/oss.html">OSS</a>
<a href="/featured.html">Featured</a>
      </nav>
      <div class="clearfix"></div>
      
        <div class="social-icons">
  <div class="social-icons-right">
    
      <a class="fa fa-github" href="https://github.com/ryanoglesby08"></a>
    
    
    
    <a class="fa fa-rss" href="/feed.xml"></a>
    
      <a class="fa fa-twitter" href="https://twitter.com/ryanoglesby08"></a>
    
    
    
    
    
    
      <a class="fa fa-linkedin" href="https://www.linkedin.com/in/ryanoglesby08"></a>
    
    
    
  </div>
  <div class="right">
    
    
    
  </div>
</div>
<div class="clearfix"></div>
      
    </div>
  </div>
</header>

    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        


<div class="post-header mb2">
  <h1>Exposing CSS Hidden Complexities with React</h1>
  <span class="post-meta">Nov 17, 2017</span><br>
  
  <span class="post-meta small">
  
    9 minute read
  
  </span>
</div>

<article class="post-content">
  <p>When we create web applications we use style sheets to describe presentation, and we use JavaScript to manage all the bits of state and logic. Unfortunately, we often end up with style sheets full of complexity, such as stateful pseudo-classes, style rule overrides through media queries, and deceivingly complicated animations. But what if we could leverage the expressiveness of React to take control of all of this?</p>

<blockquote>
  <p>Complexity is a concern better handled with JavaScript, not style sheets. If we push complexity from style sheets into JavaScript, then it becomes more obvious and predictable, thus easier to deal with.</p>
</blockquote>

<p>This post is an exploration of this hypothesis applied to 3 common CSS features:</p>

<ol>
  <li>Pseudo-classes</li>
  <li>Media queries</li>
  <li>Animations</li>
</ol>

<p><em>I’ve also created an accompanying <a href="https://github.com/ryanoglesby08/exposing-css-hidden-complexities">Github repo</a> with full, working examples of all the snippets shown in this post.</em></p>

<!-- more -->

<h2 id="motivation">Motivation</h2>

<p>While evaluating CSS-in-JS libraries for my current project recently, I did a <a href="https://github.com/ryanoglesby08/react-native-web-poc">deep dive</a> on <a href="https://github.com/necolas/react-native-web">React Native for Web</a>. The library’s philosophy and direction really resonated with me, and like many CSS-in-JS implementations it has many benefits over traditional CSS at scale. If you haven’t seen it yet check it out!</p>

<p>The <a href="https://github.com/necolas/react-native-web/blob/master/docs/guides/style.md#faqs">Style FAQs</a> in the documentation caught my eye:</p>

<p><em>“Media Queries may not be most appropriate for component-based designs. React Native provides the Dimensions API and onLayout props. If you do need Media Queries, using the matchMedia DOM API has the benefit of allowing you to swap out entire components, not just styles.”</em></p>

<p><em>“Pseudo-classes like :hover and :focus can be implemented with events (e.g. onFocus). Pseudo-elements are not supported; elements should be used instead.”</em></p>

<p>Because React Native for Web relies on React Native implementations to be cross-platform compatible, it eschews some CSS features in favor of JavaScript implementations. This makes a lot of sense even if you are not trying to build a cross-platform app. So, I decided to explore this concept further, without using React Native for Web.</p>

<h2 id="a-simple-button">A “simple” button</h2>

<p>Here is the example I’ll be using, a “simple” button component and its accompanying style sheet.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">Button.css</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="nt">button</span> <span class="p">&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
</div></div><div data-line="3" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">min-width</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
</div></div><div data-line="4" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="5" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#2892d7</span><span class="p">;</span>
</div></div><div data-line="6" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">transition</span><span class="p">:</span> <span class="n">background-color</span> <span class="m">0.5s</span><span class="p">;</span>
</div></div><div data-line="7" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="8" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="9" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="nt">button</span><span class="nd">:hover</span> <span class="p">&#x7b;</span>
</div></div><div data-line="10" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#1d70a2</span><span class="p">;</span>
</div></div><div data-line="11" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="12" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="13" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="k">@media</span> <span class="p">(</span><span class="n">max-width</span><span class="p">:</span> <span class="m">767px</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line="14" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nt">button</span> <span class="p">&#x7b;</span>
</div></div><div data-line="15" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
</div></div><div data-line="16" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
</div></div><div data-line="17" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="p">&#x7d;</span>
</div></div><div data-line="18" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span></div></div></pre></div></figure>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">Button.js</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s2">"react"</span><span class="p">;</span>
</div></div><div data-line="2" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="3" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="s2">"./CssButton.css"</span><span class="p">;</span>
</div></div><div data-line="4" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="5" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">export</span> <span class="k">default</span> <span class="p">(&#x7b;</span> <span class="nx">children</span> <span class="p">&#x7d;)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</div></div><div data-line="6" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="p">&#x7b;</span><span class="nx">children</span><span class="p">&#x7d;</span><span class="o">&lt;</span><span class="sr">/button&gt;</span><span class="err">;</span>
</div></div><div data-line="7" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">)</span></div></div></pre></div></figure>

<p><em>Full component: <a href="https://github.com/ryanoglesby08/exposing-css-hidden-complexities/tree/master/src/components/CssButton">https://github.com/ryanoglesby08/exposing-css-hidden-complexities/tree/master/src/components/CssButton</a></em></p>

<h2 id="goodbye-pseudo-classes-hello-setstate">Goodbye pseudo-classes, hello setState</h2>

<p>First up is the <code class="highlighter-rouge">:hover</code> pseudo-class. One of the key tenants of React and other UI libraries is that they pull state out of the DOM and into your components so that it is easier to reason about. CSS Pseudo-classes are a direct contradiction to this advantage. In order for the button to change it’s background color, something must know whether or not the mouse is currently “hovering” over the button. The DOM is doing that. The DOM is managing an implicit state of “mouse is over the button” or “mouse is not over the button”. The component should be managing that state, not the DOM.</p>

<p>So, I’ll refactor the Button component to use the <code class="highlighter-rouge">onMouseEnter</code> and <code class="highlighter-rouge">onMouseLeave</code> events and React’s <code class="highlighter-rouge">setState</code>.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">Button.css</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="nt">button</span> <span class="p">&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
</div></div><div data-line="3" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">min-width</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
</div></div><div data-line="4" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="5" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">transition</span><span class="p">:</span> <span class="n">background-color</span> <span class="m">0.5s</span><span class="p">;</span>
</div></div><div data-line="6" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="7" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="8" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="k">@media</span> <span class="p">(</span><span class="n">max-width</span><span class="p">:</span> <span class="m">767px</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line="9" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nt">button</span> <span class="p">&#x7b;</span>
</div></div><div data-line="10" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
</div></div><div data-line="11" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
</div></div><div data-line="12" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="p">&#x7d;</span>
</div></div><div data-line="13" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span></div></div></pre></div></figure>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">Button.js</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">&#x7b;</span> <span class="nx">Component</span> <span class="p">&#x7d;</span> <span class="nx">from</span> <span class="s2">"react"</span><span class="p">;</span>
</div></div><div data-line="2" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="3" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="s2">"./Button.css"</span><span class="p">;</span>
</div></div><div data-line="4" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">const</span> <span class="nx">bgColors</span> <span class="o">=</span> <span class="p">&#x7b;</span>
</div></div><div data-line="5" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="na">default</span><span class="p">:</span> <span class="s2">"#2892d7"</span><span class="p">,</span>
</div></div><div data-line="6" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="na">hover</span><span class="p">:</span> <span class="s2">"#1d70a2"</span>
</div></div><div data-line="7" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;;</span>
</div></div><div data-line="8" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="9" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Button</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">&#x7b;</span>
</div></div><div data-line="10" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nx">state</span> <span class="o">=</span> <span class="p">&#x7b;</span>
</div></div><div data-line="11" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="na">hover</span><span class="p">:</span> <span class="kc">false</span>
</div></div><div data-line="12" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="p">&#x7d;;</span>
</div></div><div data-line="13" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="14" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nx">toggleHover</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">&#x7b;</span>
</div></div><div data-line="15" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(&#x7b;</span> <span class="na">hover</span><span class="p">:</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">hover</span> <span class="p">&#x7d;);</span>
</div></div><div data-line="16" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="p">&#x7d;;</span>
</div></div><div data-line="17" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="18" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nx">render</span><span class="p">()</span> <span class="p">&#x7b;</span>
</div></div><div data-line="19" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="kr">const</span> <span class="p">&#x7b;</span> <span class="nx">children</span> <span class="p">&#x7d;</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
</div></div><div data-line="20" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="21" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="k">return</span> <span class="p">(</span>
</div></div><div data-line="22" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="o">&lt;</span><span class="nx">button</span>
</div></div><div data-line="23" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="nx">onMouseEnter</span><span class="o">=</span><span class="p">&#x7b;</span><span class="k">this</span><span class="p">.</span><span class="nx">toggleHover</span><span class="p">&#x7d;</span>
</div></div><div data-line="24" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="nx">onMouseLeave</span><span class="o">=</span><span class="p">&#x7b;</span><span class="k">this</span><span class="p">.</span><span class="nx">toggleHover</span><span class="p">&#x7d;</span>
</div></div><div data-line="25" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="nx">style</span><span class="o">=</span><span class="p">&#x7b;&#x7b;</span>
</div></div><div data-line="26" class="code-highlight-row unnumbered"><div class="code-highlight-line">          <span class="na">backgroundColor</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">hover</span> <span class="p">?</span> <span class="nx">bgColors</span><span class="p">.</span><span class="nx">hover</span> <span class="p">:</span> <span class="nx">bgColors</span><span class="p">.</span><span class="k">default</span>
</div></div><div data-line="27" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="p">&#x7d;&#x7d;</span>
</div></div><div data-line="28" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="o">&gt;</span>
</div></div><div data-line="29" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="p">&#x7b;</span><span class="nx">children</span><span class="p">&#x7d;</span>
</div></div><div data-line="30" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;</span>
</div></div><div data-line="31" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="p">);</span>
</div></div><div data-line="32" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="p">&#x7d;</span>
</div></div><div data-line="33" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span></div></div></pre></div></figure>

<p><em>Full component: <a href="https://github.com/ryanoglesby08/exposing-css-hidden-complexities/tree/master/src/components/HoverButton">https://github.com/ryanoglesby08/exposing-css-hidden-complexities/tree/master/src/components/HoverButton</a></em></p>

<h2 id="a-more-power-media-query">A more power media query</h2>

<p>Media queries suffer from the same contradiction as pseudo-classes. There is an implicit state of “the media query is matched” or “the media query is not matched” that should be managed by JavaScript.</p>

<p>While pure CSS media queries are powerful, they tend to result in overriding of previously defined style values, which can often cause unwanted side effects and mistakes due to specificity errors. As the React Native for Web docs point out, they also are constrained to adjusting styles only. They can’t be used to swap out entire components.</p>

<p>Next, I’ll move the media queries out of the style sheet, preferring the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia"><code class="highlighter-rouge">window.matchMedia</code></a> DOM API instead. <a href="https://github.com/reacttraining/react-media">react-media</a> is a nice little package that provides a component interface for <code class="highlighter-rouge">window.matchMedia</code>.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">Button.css</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="nt">button</span> <span class="p">&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">transition</span><span class="p">:</span> <span class="n">background-color</span> <span class="m">0.5s</span><span class="p">;</span>
</div></div><div data-line="3" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="4" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="5" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="nc">.inline</span> <span class="p">&#x7b;</span>
</div></div><div data-line="6" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
</div></div><div data-line="7" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">min-width</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
</div></div><div data-line="8" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="9" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="10" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="nc">.fullWidth</span> <span class="p">&#x7b;</span>
</div></div><div data-line="11" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
</div></div><div data-line="12" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
</div></div><div data-line="13" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span></div></div></pre></div></figure>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">Button.js</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="2" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">&#x7b;</span> <span class="nx">Component</span> <span class="p">&#x7d;</span> <span class="nx">from</span> <span class="s2">"react"</span><span class="p">;</span>
</div></div><div data-line="3" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="nx">Media</span> <span class="nx">from</span> <span class="s2">"react-media"</span><span class="p">;</span>
</div></div><div data-line="4" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="5" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="s2">"./Button.css"</span><span class="p">;</span>
</div></div><div data-line="6" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="7" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">class</span> <span class="nx">Button</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">&#x7b;</span>
</div></div><div data-line="8" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="c1">// same as previous Button.js snippet</span>
</div></div><div data-line="9" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="10" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="11" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">export</span> <span class="k">default</span> <span class="p">(&#x7b;</span> <span class="nx">children</span> <span class="p">&#x7d;)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</div></div><div data-line="12" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="o">&lt;</span><span class="nx">Media</span> <span class="nx">query</span><span class="o">=</span><span class="p">&#x7b;&#x7b;</span> <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">767</span> <span class="p">&#x7d;&#x7d;</span><span class="o">&gt;</span>
</div></div><div data-line="13" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="p">&#x7b;</span><span class="nx">matches</span> <span class="o">=&gt;</span>
</div></div><div data-line="14" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="nx">matches</span> <span class="p">?</span> <span class="p">(</span>
</div></div><div data-line="15" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"fullWidth"</span><span class="o">&gt;</span><span class="p">&#x7b;</span><span class="nx">children</span><span class="p">&#x7d;</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;</span>
</div></div><div data-line="16" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="p">)</span> <span class="p">:</span> <span class="p">(</span>
</div></div><div data-line="17" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"inline"</span><span class="o">&gt;</span><span class="p">&#x7b;</span><span class="nx">children</span><span class="p">&#x7d;</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;</span>
</div></div><div data-line="18" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="p">)</span>
</div></div><div data-line="19" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="p">&#x7d;</span>
</div></div><div data-line="20" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="o">&lt;</span><span class="sr">/Media</span><span class="err">&gt;</span>
</div></div><div data-line="21" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">);</span></div></div></pre></div></figure>

<p><em>Full component: <a href="https://github.com/ryanoglesby08/exposing-css-hidden-complexities/tree/master/src/components/ResponsiveButton">https://github.com/ryanoglesby08/exposing-css-hidden-complexities/tree/master/src/components/ResponsiveButton</a></em></p>

<h2 id="animations-as-components">Animations as components</h2>

<p>The final thing to tackle here is the <code class="highlighter-rouge">transition</code>. For all but the most experienced CSS wizards out there, CSS animations or transitions can be really challenging. Moreover, they require the combination of multiple style rules working together.</p>

<p>In this case, <code class="highlighter-rouge">transition: background-color 0.5s</code> describes a state change of the property <code class="highlighter-rouge">background-color</code>. When the <code class="highlighter-rouge">background-color</code> property of the button changes to another value, either through a class being added or removed, or a style property being edited, the background will shift from its previous value to its new value over a timespan of 0.5 seconds. It’s pretty complex, and this is a very simple transition.</p>

<p>Finally, I’ll bring the transition into the component with the <a href="https://reactcommunity.org/react-transition-group/">react-transition-group</a> package, which lets you describe a transition from one component state to another over time with a simple declarative API.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">BgColorShift.js</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s2">"react"</span><span class="p">;</span>
</div></div><div data-line="2" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="p">&#x7b;</span> <span class="nx">Transition</span> <span class="p">&#x7d;</span> <span class="nx">from</span> <span class="s2">"react-transition-group"</span><span class="p">;</span>
</div></div><div data-line="3" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="4" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">const</span> <span class="nx">defaultStyle</span> <span class="o">=</span> <span class="p">(</span><span class="nx">startBgColor</span><span class="p">,</span> <span class="nx">timeout</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(&#x7b;</span>
</div></div><div data-line="5" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="na">transition</span><span class="p">:</span> <span class="err">`</span><span class="nx">background</span><span class="o">-</span><span class="nx">color</span> <span class="nx">$</span><span class="p">&#x7b;</span><span class="nx">timeout</span><span class="p">&#x7d;</span><span class="nx">ms</span><span class="err">`</span><span class="p">,</span>
</div></div><div data-line="6" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="na">backgroundColor</span><span class="p">:</span> <span class="nx">startBgColor</span>
</div></div><div data-line="7" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;);</span>
</div></div><div data-line="8" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="9" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">const</span> <span class="nx">transitionStyles</span> <span class="o">=</span> <span class="nx">endBgColor</span> <span class="o">=&gt;</span> <span class="p">&#x7b;</span>
</div></div><div data-line="10" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="k">return</span> <span class="p">&#x7b;</span>
</div></div><div data-line="11" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="na">entering</span><span class="p">:</span> <span class="p">&#x7b;</span> <span class="na">backgroundColor</span><span class="p">:</span> <span class="nx">endBgColor</span> <span class="p">&#x7d;,</span>
</div></div><div data-line="12" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="na">entered</span><span class="p">:</span> <span class="p">&#x7b;</span> <span class="na">backgroundColor</span><span class="p">:</span> <span class="nx">endBgColor</span> <span class="p">&#x7d;</span>
</div></div><div data-line="13" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="p">&#x7d;;</span>
</div></div><div data-line="14" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;;</span>
</div></div><div data-line="15" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="16" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">export</span> <span class="k">default</span> <span class="p">(&#x7b;</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">children</span><span class="p">,</span> <span class="p">...</span><span class="nx">rest</span> <span class="p">&#x7d;)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</div></div><div data-line="17" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="o">&lt;</span><span class="nx">Transition</span> <span class="p">&#x7b;...</span><span class="nx">rest</span><span class="p">&#x7d;</span><span class="o">&gt;</span>
</div></div><div data-line="18" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="p">&#x7b;</span><span class="nx">status</span> <span class="o">=&gt;</span> <span class="p">&#x7b;</span>
</div></div><div data-line="19" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="kr">const</span> <span class="nx">styles</span> <span class="o">=</span> <span class="p">&#x7b;</span>
</div></div><div data-line="20" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="p">...</span><span class="nx">defaultStyle</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">rest</span><span class="p">.</span><span class="nx">timeout</span><span class="p">),</span>
</div></div><div data-line="21" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="p">...</span><span class="nx">transitionStyles</span><span class="p">(</span><span class="nx">end</span><span class="p">)[</span><span class="nx">status</span><span class="p">]</span>
</div></div><div data-line="22" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="p">&#x7d;;</span>
</div></div><div data-line="23" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="24" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="k">return</span> <span class="nx">children</span><span class="p">(</span><span class="nx">styles</span><span class="p">);</span>
</div></div><div data-line="25" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="p">&#x7d;&#x7d;</span>
</div></div><div data-line="26" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="o">&lt;</span><span class="sr">/Transition</span><span class="err">&gt;</span>
</div></div><div data-line="27" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">);</span></div></div></pre></div></figure>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">Button.js</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">&#x7b;</span> <span class="nx">Component</span> <span class="p">&#x7d;</span> <span class="nx">from</span> <span class="s2">"react"</span><span class="p">;</span>
</div></div><div data-line="2" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="3" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="nx">BgColorShift</span> <span class="nx">from</span> <span class="s2">"./BgColorShift"</span><span class="p">;</span>
</div></div><div data-line="4" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="5" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">import</span> <span class="s2">"./Button.css"</span><span class="p">;</span>
</div></div><div data-line="6" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">const</span> <span class="nx">bgColors</span> <span class="o">=</span> <span class="p">&#x7b;</span>
</div></div><div data-line="7" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="na">default</span><span class="p">:</span> <span class="s2">"#2892d7"</span><span class="p">,</span>
</div></div><div data-line="8" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="na">hover</span><span class="p">:</span> <span class="s2">"#1d70a2"</span>
</div></div><div data-line="9" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;;</span>
</div></div><div data-line="10" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="11" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="kr">class</span> <span class="nx">Button</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">&#x7b;</span>
</div></div><div data-line="12" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="c1">// ... setState stuff</span>
</div></div><div data-line="13" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="14" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="nx">render</span><span class="p">()</span> <span class="p">&#x7b;</span>
</div></div><div data-line="15" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="kr">const</span> <span class="p">&#x7b;</span> <span class="nx">className</span><span class="p">,</span> <span class="nx">children</span> <span class="p">&#x7d;</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
</div></div><div data-line="16" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="17" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="k">return</span> <span class="p">(</span>
</div></div><div data-line="18" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="o">&lt;</span><span class="nx">BgColorShift</span>
</div></div><div data-line="19" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="nx">timeout</span><span class="o">=</span><span class="p">&#x7b;</span><span class="mi">500</span><span class="p">&#x7d;</span>
</div></div><div data-line="20" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="k">in</span><span class="o">=</span><span class="p">&#x7b;</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">hover</span><span class="p">&#x7d;</span>
</div></div><div data-line="21" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="nx">start</span><span class="o">=</span><span class="p">&#x7b;</span><span class="nx">bgColors</span><span class="p">.</span><span class="k">default</span><span class="p">&#x7d;</span>
</div></div><div data-line="22" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="nx">end</span><span class="o">=</span><span class="p">&#x7b;</span><span class="nx">bgColors</span><span class="p">.</span><span class="nx">hover</span><span class="p">&#x7d;</span>
</div></div><div data-line="23" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="o">&gt;</span>
</div></div><div data-line="24" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="p">&#x7b;</span><span class="nx">bgColorStyles</span> <span class="o">=&gt;</span> <span class="p">(</span>
</div></div><div data-line="25" class="code-highlight-row unnumbered"><div class="code-highlight-line">          <span class="o">&lt;</span><span class="nx">button</span>
</div></div><div data-line="26" class="code-highlight-row unnumbered"><div class="code-highlight-line">            <span class="nx">onMouseEnter</span><span class="o">=</span><span class="p">&#x7b;</span><span class="k">this</span><span class="p">.</span><span class="nx">toggleHover</span><span class="p">&#x7d;</span>
</div></div><div data-line="27" class="code-highlight-row unnumbered"><div class="code-highlight-line">            <span class="nx">onMouseLeave</span><span class="o">=</span><span class="p">&#x7b;</span><span class="k">this</span><span class="p">.</span><span class="nx">toggleHover</span><span class="p">&#x7d;</span>
</div></div><div data-line="28" class="code-highlight-row unnumbered"><div class="code-highlight-line">            <span class="nx">style</span><span class="o">=</span><span class="p">&#x7b;</span><span class="nx">bgColorStyles</span><span class="p">&#x7d;</span>
</div></div><div data-line="29" class="code-highlight-row unnumbered"><div class="code-highlight-line">          <span class="o">&gt;</span>
</div></div><div data-line="30" class="code-highlight-row unnumbered"><div class="code-highlight-line">            <span class="p">&#x7b;</span><span class="nx">children</span><span class="p">&#x7d;</span>
</div></div><div data-line="31" class="code-highlight-row unnumbered"><div class="code-highlight-line">          <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;</span>
</div></div><div data-line="32" class="code-highlight-row unnumbered"><div class="code-highlight-line">        <span class="p">)&#x7d;</span>
</div></div><div data-line="33" class="code-highlight-row unnumbered"><div class="code-highlight-line">      <span class="o">&lt;</span><span class="sr">/BgColorShift</span><span class="err">&gt;</span>
</div></div><div data-line="34" class="code-highlight-row unnumbered"><div class="code-highlight-line">    <span class="p">);</span>
</div></div><div data-line="35" class="code-highlight-row unnumbered"><div class="code-highlight-line">  <span class="p">&#x7d;</span>
</div></div><div data-line="36" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="p">&#x7d;</span>
</div></div><div data-line="37" class="code-highlight-row unnumbered"><div class="code-highlight-line"> </div></div><div data-line="38" class="code-highlight-row unnumbered"><div class="code-highlight-line"><span class="c1">// export default with the Media query component</span></div></div></pre></div></figure>

<p><em>Full component: <a href="https://github.com/ryanoglesby08/exposing-css-hidden-complexities/tree/master/src/components/AnimatedButton">https://github.com/ryanoglesby08/exposing-css-hidden-complexities/tree/master/src/components/AnimatedButton</a></em></p>

<h2 id="i-can-write-tests-for-this-stuff-now">I can write tests for this stuff now!</h2>

<p>One of the big wins as I moved complexity into JavaScript was the increased level of testability. There weren’t any tests that really made sense when all the UI behavior was implemented in a style sheet. Writing tests for these things takes some of the burden off of manual visual checks, creates documentation of the visual language, and helps prevent future regressions.</p>

<p>Here are some of the tests:</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">Button.spec.js</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nx">it</span><span class="p">(</span><span class="s2">"changes background color on hover"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">mount</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Button</span><span class="o">&gt;</span><span class="nx">Press</span> <span class="nx">me</span><span class="o">&lt;</span><span class="sr">/Button&gt;</span><span class="se">)</span><span class="err">;</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="nx">button</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span><span class="s2">"mouseEnter"</span><span class="p">);</span>
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="nx">expect</span><span class="p">(</span><span class="nx">button</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"button"</span><span class="p">)).</span><span class="nx">toHaveStyle</span><span class="p">(</span><span class="s2">"backgroundColor"</span><span class="p">,</span> <span class="s2">"#1d70a2"</span><span class="p">);</span>
</div></div><div data-line="6" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="7" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="nx">button</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span><span class="s2">"mouseLeave"</span><span class="p">);</span>
</div></div><div data-line="8" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="nx">expect</span><span class="p">(</span><span class="nx">button</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"button"</span><span class="p">)).</span><span class="nx">toHaveStyle</span><span class="p">(</span><span class="s2">"backgroundColor"</span><span class="p">,</span> <span class="s2">"#2892d7"</span><span class="p">);</span>
</div></div><div data-line="9" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7d;);</span>
</div></div><div data-line="10" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="11" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="nx">it</span><span class="p">(</span><span class="s2">"is full width on small viewports"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">&#x7b;</span>
</div></div><div data-line="12" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="c1">// Setup mock for `window.matchMedia` because test is running in jsdom</span>
</div></div><div data-line="13" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="kr">const</span> <span class="nx">matchMedia</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">();</span>
</div></div><div data-line="14" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="nx">matchMedia</span><span class="p">.</span><span class="nx">mockImplementation</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">(&#x7b;</span>
</div></div><div data-line="15" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="na">matches</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</div></div><div data-line="16" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="na">addListener</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">&#x7b;&#x7d;,</span>
</div></div><div data-line="17" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="na">removeListener</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">&#x7b;&#x7d;</span>
</div></div><div data-line="18" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="p">&#x7d;));</span>
</div></div><div data-line="19" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="nx">global</span><span class="p">.</span><span class="nx">matchMedia</span> <span class="o">=</span> <span class="nx">matchMedia</span><span class="p">;</span>
</div></div><div data-line="20" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="21" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">mount</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Button</span><span class="o">&gt;</span><span class="nx">Press</span> <span class="nx">me</span><span class="o">&lt;</span><span class="sr">/Button&gt;</span><span class="se">)</span><span class="err">;</span>
</div></div><div data-line="22" class="code-highlight-row numbered"><div class="code-highlight-line"> </div></div><div data-line="23" class="code-highlight-row numbered"><div class="code-highlight-line">  <span class="nx">expect</span><span class="p">(</span><span class="nx">button</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"button"</span><span class="p">)).</span><span class="nx">toHaveClassName</span><span class="p">(</span><span class="s2">"fullWidth"</span><span class="p">);</span>
</div></div><div data-line="24" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="p">&#x7d;);</span></div></div></pre></div></figure>

<h2 id="my-insights">My insights</h2>

<p>Maybe the most obvious “downside” here is that the total amount of code has increased, by a lot. I’ve written less CSS, but much more JavaScript, and I’ve added 2 third-party libraries… just to make a button.</p>

<p>Let’s be clear here, my stated goal was not to create the most clever, most terse button. It was to expose complexities hidden in CSS so that I could identify complexity, reason about it more easily, control it, and test it. React actually has similar goals. React has never said that it’s goal is to produce solutions with minimal lines of code. Rather, it aims for declarative components, predictability, and JavaScript-controlled logic (<a href="https://reactjs.org/">https://reactjs.org/</a>). The most clever solution is often the least understandable.</p>

<center>
	<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">This is what good real world React  code often looks like. Nothing wrong with it being verbose and explicit. Don’t mistake terse for clean! <a href="https://t.co/qjB685FnuJ">https://t.co/qjB685FnuJ</a></p>&mdash; Dan Abramov (@dan_abramov) <a href="https://twitter.com/dan_abramov/status/931333632572252160?ref_src=twsrc%5Etfw">November 17, 2017</a></blockquote>
	<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</center>

<h3 id="pros-and-cons">Pros and cons</h3>

<ul>
  <li>If you regularly use your browser’s dev tools to debug/play with the styles of your components, the JavaScript approach changes that a bit. For example, most dev tools let you trigger a pseudo-class such as <code class="highlighter-rouge">:hover</code>. That will no longer have a visible effect. Instead, use the <a href="https://github.com/facebook/react-devtools">React dev tools</a> to programmatically interact with your components.</li>
</ul>

<div class="center">
  <p>
  <figure class="image">
    <img src="/assets/images/react-dev-tools.png" alt="Using the React Dev Tools" />
    
  </figure>
</p>
</div>

<ul>
  <li>
    <p>I get really nervous when I see CSS or Sass that has a lot of nesting and overriding of style rules. I like how the final CSS file I ended up with was flat. All style rules are static, there is no nesting, and nothing is overridden by another class. Ahhhhh, peace.</p>
  </li>
  <li>
    <p>I’m pretty excited about encapsulating common visual concerns into reusable components with a single responsibility. In this exploration I identified a reusable media query component and an animation component that could be extracted. In another project I’ve started extracting layout components such as <code class="highlighter-rouge">Box</code> to control spacing, and <code class="highlighter-rouge">Flexbox</code> to control 1-dimensional layout. Check out these libraries for more: <a href="https://sapegin.github.io/react-spaceman/">https://sapegin.github.io/react-spaceman/</a> and <a href="https://github.com/jxnblk/reflexbox">https://github.com/jxnblk/reflexbox</a>.</p>
  </li>
  <li>
    <p>Finally, I was not able to write a test for the transition that I was completely satisfied with. Transitions and animations are inherently time based, which does not play nicely with unit testing. The best I could do was take before and after snapshots and then rely on manual visual checks to make sure the transition looked proper while it was running. But, with a reusable <code class="highlighter-rouge">BgColorShift</code> component now at my disposal, I can now trust it’s behavior, making future transitions easier to implement.</p>
  </li>
</ul>

</article>


  <div class="share-page">
  Share me:

  <div class="share-links ml1">
    
      <a class="fa fa-facebook" href="https://facebook.com/sharer.php?u=http://ryanogles.by/css/javascript/react/2017/11/17/exposing-css-hidden-complexities-with-react.html" rel="nofollow" target="_blank" title="Share on Facebook"></a>
    

    
      <a class="fa fa-twitter" href="https://twitter.com/intent/tweet?text=Exposing CSS Hidden Complexities with React&url=http://ryanogles.by/css/javascript/react/2017/11/17/exposing-css-hidden-complexities-with-react.html" rel="nofollow" target="_blank" title="Share on Twitter"></a>
    

    

    
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?url=http://ryanogles.by/css/javascript/react/2017/11/17/exposing-css-hidden-complexities-with-react.html&title=Exposing CSS Hidden Complexities with React" rel="nofollow" target="_blank" title="Share on LinkedIn"></a>
    

    

    

    

    

    
      <a class="fa fa-hacker-news" onclick="parent.postMessage('submit','*')" href="https://news.ycombinator.com/submitlink?u=http://ryanogles.by/css/javascript/react/2017/11/17/exposing-css-hidden-complexities-with-react.html&t=Exposing CSS Hidden Complexities with React" rel="nofollow" target="_blank" title="Share on Hacker News"></a>
    
  </div>
</div>





  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname  = 'ryanoglesby';
    var disqus_identifier = '/css/javascript/react/2017/11/17/exposing-css-hidden-complexities-with-react';
    var disqus_title      = "Exposing CSS Hidden Complexities with React";

    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






      </div>
    </div>
  </div>

  <footer class="center">
  <div class="measure">
    <small>
      Theme crafted with &lt;3 by <a href="http://johnotander.com">John Otander</a> (<a href="https://twitter.com/4lpine">@4lpine</a>).<br>
      &lt;/&gt; available on <a href="https://github.com/johnotander/pixyll">Github</a>.
    </small>
  </div>
</footer>
</body>
</html>
