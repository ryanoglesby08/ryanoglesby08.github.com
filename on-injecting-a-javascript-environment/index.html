<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-763ba412a97c3b163683.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-js-df45eb35ee57dbfd9688.js" as="script"/><link rel="preload" href="/path---on-injecting-a-javascript-environment-cfaf2cd8a6cd36856cc4.js" as="script"/><link rel="preload" href="/app-a6c07b7deb9b1f9afbf4.js" as="script"/><link rel="preload" href="/commons-d28add18220aa81cf0d7.js" as="script"/><script>window.__EMOTION_CRITICAL_CSS_IDS__ = ["1cyxkgw","yckaeb","1mqwiuu","g96o0e","gokeqi","nluxrg"];</script><style>.css-1cyxkgw{font-size:1.58114rem;line-height:2.625rem;font-family:Montserrat,sans-serif;margin-top:0;}.css-yckaeb{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-1mqwiuu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.css-g96o0e{list-style-type:none;margin:0;padding:0;}.css-g96o0e li:not(last-child){display:inline;margin:0;padding:0;margin-right:1.3125rem;}.css-g96o0e li:last-child{margin-right:0;}.css-gokeqi{box-shadow:none;}.css-nluxrg{list-style-type:none;margin:0;padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.css-nluxrg li{max-width:50%;}</style><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">On Injecting a JavaScript Environment | Ryan Oglesby</title><script data-react-helmet="true" async="" src="https://production-assets.codepen.io/assets/embed/ei.js"></script><script data-react-helmet="true" async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}tt, code{font-family:"Space Mono",Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;font-variant:none;-webkit-font-feature-settings:"clig" 0, "calt" 0;font-feature-settings:"clig" 0, "calt" 0;padding-top:0.1em;padding-bottom:0.1em;background-color:#fdf6e3;border-radius:2px;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}</style><link href="//fonts.googleapis.com/css?family=Montserrat:700|Merriweather:400,400i,700,700i,900,900i" rel="stylesheet" type="text/css"/><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.gatsby-highlight-code-line{background-color:#feb;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #f99}.gatsby-highlight{background-color:#fdf6e3;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-]{background-color:transparent;margin:0;padding:0;overflow:visible;overflow:initial;float:left;min-width:100%}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100.4124805c.woff2) format("woff2"),url(/static/montserrat-latin-100.c8fb2f71.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic.e4bf47bd.woff2) format("woff2"),url(/static/montserrat-latin-100italic.d1f3f2d0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200.444ae007.woff2) format("woff2"),url(/static/montserrat-latin-200.edbce16a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic.f316c5d1.woff2) format("woff2"),url(/static/montserrat-latin-200italic.d7bbb730.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300.0a7c6df0.woff2) format("woff2"),url(/static/montserrat-latin-300.5e86df2c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic.c076c489.woff2) format("woff2"),url(/static/montserrat-latin-300italic.37c74a8d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400.501ce09c.woff2) format("woff2"),url(/static/montserrat-latin-400.f29d2b85.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic.882908d9.woff2) format("woff2"),url(/static/montserrat-latin-400italic.22e7b04e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500.f0f2716c.woff2) format("woff2"),url(/static/montserrat-latin-500.991b453b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic.4590ebba.woff2) format("woff2"),url(/static/montserrat-latin-500italic.f3d41e4c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600.15c24f71.woff2) format("woff2"),url(/static/montserrat-latin-600.f6dc6096.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic.6d10b805.woff2) format("woff2"),url(/static/montserrat-latin-600italic.02c48333.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700.79982cd1.woff2) format("woff2"),url(/static/montserrat-latin-700.957e93fb.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic.283438e9.woff2) format("woff2"),url(/static/montserrat-latin-700italic.ca627c5c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800.35386154.woff2) format("woff2"),url(/static/montserrat-latin-800.75665590.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic.e1b52a7b.woff2) format("woff2"),url(/static/montserrat-latin-800italic.a69f0add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900.260c2ea3.woff2) format("woff2"),url(/static/montserrat-latin-900.186cae80.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic.d785fb9f.woff2) format("woff2"),url(/static/montserrat-latin-900italic.43b527fe.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300.a50c3814.woff2) format("woff2"),url(/static/merriweather-latin-300.2c73b119.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic.bd410cbf.woff2) format("woff2"),url(/static/merriweather-latin-300italic.9deeb422.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400.f936cb55.woff2) format("woff2"),url(/static/merriweather-latin-400.ab0616e6.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic.5c9a23d0.woff2) format("woff2"),url(/static/merriweather-latin-400italic.0ab4b54f.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700.1636f13a.woff2) format("woff2"),url(/static/merriweather-latin-700.cc673c94.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic.8b0db671.woff2) format("woff2"),url(/static/merriweather-latin-700italic.513649f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900.46631a9a.woff2) format("woff2"),url(/static/merriweather-latin-900.a0528570.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic.a26a8168.woff2) format("woff2"),url(/static/merriweather-latin-900italic.db42a3f3.woff) format("woff")}</style></head><body><div id="___gatsby"><div style="max-width:42rem;margin-left:auto;margin-right:auto;padding:2.625rem 1.3125rem;" data-reactroot="" data-reactid="1" data-react-checksum="-505795754"><header data-reactid="2"><span class="css-1cyxkgw e1ddotcm1" data-reactid="3"><a class="css-yckaeb ea16c6g0" href="/" data-reactid="4">Ryan Oglesby</a></span><nav class="css-1mqwiuu egg11me0" data-reactid="5"><ul class="css-g96o0e egg11me1" data-reactid="6"><li data-reactid="7"><a href="/" data-reactid="8">Blog</a></li><li data-reactid="9"><a href="/about" data-reactid="10">Me</a></li></ul><ul class="css-g96o0e egg11me1" data-reactid="11"><li data-reactid="12"><a href="https://github.com/ryanoglesby08" class="css-gokeqi egg11me2" data-reactid="13"><svg id="icon-57" width="16" height="16" viewBox="0 0 16 16" fill="#000000" role="link" aria-labelledby="icon-57_title icon-57_description" data-reactid="14"><title id="icon-57_title" data-reactid="15">Github</title><desc id="icon-57_description" data-reactid="16">The Github logo is an octocat.</desc><path d="M8 0.198c-4.418 0-8 3.582-8 8 0 3.535 2.292 6.533 5.471 7.591 0.4 0.074 0.547-0.174 0.547-0.385 0-0.191-0.008-0.821-0.011-1.489-2.226 0.484-2.695-0.944-2.695-0.944-0.364-0.925-0.888-1.171-0.888-1.171-0.726-0.497 0.055-0.486 0.055-0.486 0.803 0.056 1.226 0.824 1.226 0.824 0.714 1.223 1.872 0.869 2.328 0.665 0.072-0.517 0.279-0.87 0.508-1.070-1.777-0.202-3.645-0.888-3.645-3.954 0-0.873 0.313-1.587 0.824-2.147-0.083-0.202-0.357-1.015 0.077-2.117 0 0 0.672-0.215 2.201 0.82 0.638-0.177 1.322-0.266 2.002-0.269 0.68 0.003 1.365 0.092 2.004 0.269 1.527-1.035 2.198-0.82 2.198-0.82 0.435 1.102 0.162 1.916 0.079 2.117 0.513 0.56 0.823 1.274 0.823 2.147 0 3.073-1.872 3.749-3.653 3.947 0.287 0.248 0.543 0.735 0.543 1.481 0 1.070-0.009 1.932-0.009 2.195 0 0.213 0.144 0.462 0.55 0.384 3.177-1.059 5.466-4.057 5.466-7.59 0-4.418-3.582-8-8-8z" data-reactid="17"></path></svg></a></li><li data-reactid="18"><a href="https://twitter.com/ryanoglesby08" class="css-gokeqi egg11me2" data-reactid="19"><svg id="icon-58" width="16" height="16" viewBox="0 0 16 16" fill="#000000" role="link" aria-labelledby="icon-58_title icon-58_description" data-reactid="20"><title id="icon-58_title" data-reactid="21">Twitter</title><desc id="icon-58_description" data-reactid="22">The Twitter logo is a small bird in flight.</desc><path d="M16 3.538c-0.588 0.263-1.222 0.438-1.884 0.516 0.678-0.406 1.197-1.050 1.444-1.816-0.634 0.375-1.338 0.65-2.084 0.797-0.6-0.638-1.453-1.034-2.397-1.034-1.813 0-3.281 1.469-3.281 3.281 0 0.256 0.028 0.506 0.084 0.747-2.728-0.138-5.147-1.444-6.766-3.431-0.281 0.484-0.444 1.050-0.444 1.65 0 1.138 0.578 2.144 1.459 2.731-0.538-0.016-1.044-0.166-1.488-0.409 0 0.013 0 0.028 0 0.041 0 1.591 1.131 2.919 2.634 3.219-0.275 0.075-0.566 0.116-0.866 0.116-0.212 0-0.416-0.022-0.619-0.059 0.419 1.303 1.631 2.253 3.066 2.281-1.125 0.881-2.538 1.406-4.078 1.406-0.266 0-0.525-0.016-0.784-0.047 1.456 0.934 3.181 1.475 5.034 1.475 6.037 0 9.341-5.003 9.341-9.341 0-0.144-0.003-0.284-0.009-0.425 0.641-0.459 1.197-1.038 1.637-1.697z" data-reactid="23"></path></svg></a></li><li data-reactid="24"><a href="https://www.linkedin.com/in/ryanoglesby08" class="css-gokeqi egg11me2" data-reactid="25"><svg id="icon-59" width="16" height="16" viewBox="0 0 16 16" fill="#000000" role="link" aria-labelledby="icon-59_title icon-59_description" data-reactid="26"><title id="icon-59_title" data-reactid="27">Linked In</title><desc id="icon-59_description" data-reactid="28">The Linked In logo is the word in displayed in lower case text inside of a square.</desc><path d="M6 6h2.767v1.418h0.040c0.385-0.691 1.327-1.418 2.732-1.418 2.921 0 3.461 1.818 3.461 4.183v4.817h-2.885v-4.27c0-1.018-0.021-2.329-1.5-2.329-1.502 0-1.732 1.109-1.732 2.255v4.344h-2.883v-9z M1 6h3v9h-3v-9z M4 3.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z" data-reactid="29"></path></svg></a></li><li data-reactid="30"><a href="/rss.xml" class="css-gokeqi egg11me2" data-reactid="31"><svg id="icon-60" width="16" height="16" viewBox="0 0 16 16" fill="#000000" role="link" aria-labelledby="icon-60_title icon-60_description" data-reactid="32"><title id="icon-60_title" data-reactid="33">RSS Feed</title><desc id="icon-60_description" data-reactid="34">The RSS Feed logo is .</desc><path d="M2.13 11.733c-1.175 0-2.13 0.958-2.13 2.126 0 1.174 0.955 2.122 2.13 2.122 1.179 0 2.133-0.948 2.133-2.122-0-1.168-0.954-2.126-2.133-2.126zM0.002 5.436v3.067c1.997 0 3.874 0.781 5.288 2.196 1.412 1.411 2.192 3.297 2.192 5.302h3.080c-0-5.825-4.739-10.564-10.56-10.564zM0.006 0v3.068c7.122 0 12.918 5.802 12.918 12.932h3.076c0-8.82-7.176-16-15.994-16z" data-reactid="35"></path></svg></a></li></ul></nav><hr data-reactid="36"/></header><main data-reactid="37"><div data-reactid="38"><!-- react-empty: 39 --><h1 data-reactid="40">On Injecting a JavaScript Environment</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem;" data-reactid="41">November 04, 2016</p><section data-reactid="42"><p><strong>Updated 2017-02-12</strong>: Added a strategy for loading configuration at initial page load, using an
“env.js” file.</p>
<p>Recently, I needed to inject some configuration variables into my client-side app. Because Googling
for it turned up a lot of “well, you could maybe do this…” I decided to write down what I see as
the 3 main options:</p>
<ul>
<li><strong>Best in show:</strong> Load configuration at <em>run time</em>.</li>
<li><strong>Prize for simplest solution:</strong> Build your application with configuration variables as constants
at <em>compile time</em>.</li>
<li>Runner up: Use server-side templating to inject configuration at <em>render time</em>.</li>
</ul>
<!-- more -->
<h2>So, what do I want to do again?</h2>
<p>First, let’s define the problem clearly. Handling configuration variables is something most
applications need. For server-side applications, there are plenty of options out there. Most involve
loading properties from files and then overriding values with environment variables injected at run
time - such as the <a href="https://www.npmjs.com/package/config">config package</a> for node servers.</p>
<p>Client-side applications present some challenges. Because the app is delivered to the client web
browser, loading files from the server does not work as easily. Specifying values with environment
variables is also different, because the “environment” in a client app is the user’s web browser. We
don’t have access to that JavaScript environment to inject values.</p>
<p>Finally, I want to follow the recommendations for configuration of the
<a href="https://12factor.net/config">Twelve-Factor app</a>, which boil down to:</p>
<ul>
<li>“strict separation of config from code”</li>
<li>“…stores config in environment variables” rather than environment specific config files</li>
</ul>
<p>So, let’s examine the options, and consider the pros and cons of each.</p>
<h2>Load configuration at <em>run time</em></h2>
<p>This is strategy I went with, and seems to be working well. With this approach, the client app loads
configuration from a remote server on initial page load.</p>
<p>Because we do not have to bake in the configuration values to the compiled JavaScript, (one of the
other options) we get to build our application only once. This means we deploy the exact same code
to all environments. Score.</p>
<p>We also do not have to use any server side templating, which gives us more freedom in how we deploy
and serve our application. We can serve our application as static files if we want to.</p>
<p>The trick here is to build a little bit of smarts into our web server, so that it converts an
injected set of environment variables to a JavaScript file on startup, and then serves it as a
static file.</p>
<p>Here is the gist:</p>
<ol>
<li>In your <code class="language-text">index.html</code> file, add a script tag for an “env.js” file, which does not exist. (yet)</li>
<li>In your application server code, write the “env.js” file on startup using an environment variable
as the contents. Then statically serve the directory containing the “env.js” file.</li>
<li>Make the environment variable available to the server when running it.</li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- 1. index.html --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="gatsby-highlight-code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/env.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/app.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 2. server.js</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">8080</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="gatsby-highlight-code-line">fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>
</span><span class="gatsby-highlight-code-line">  <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/config/env.js`</span></span><span class="token punctuation">,</span>
</span><span class="gatsby-highlight-code-line">  <span class="token template-string"><span class="token string">`var config = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">CLIENT_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;`</span></span>
</span><span class="gatsby-highlight-code-line"><span class="token punctuation">)</span>
</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/config'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span>app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  response<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span></code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token comment"># 3. running the server</span>

<span class="token function">export</span> CLIENT_ENV<span class="token operator">=</span><span class="token string">'{API_URL: "http://dev.my-api.some-domain.com"}'</span>
node server.js</code></pre>
      </div>
<p>One of the downsides here is that we are creating global state, the <code class="language-text">config</code> variable, which is
something that is generally frowned upon and avoided in modern JavaScript apps (and most
applications for that matter). There are a few ways to address this, with the simplest being to
agree not to read from the <code class="language-text">config</code> variable directly, and create a function that your application
always uses to access it. This way, the only place in your codebase where the config variable is
touched is that function. You should also <strong>never</strong> modify the config variable. Treat it as read
only.</p>
<h3>An experiment - asynchronous configuration loading</h3>
<p>Along similar lines, I also played with loading configuration from a remote server with an
XMLHttpRequest. This feels like a cool approach, but the wrench here is that introducing
asynchronous network calls introduces un-necessary complexity. Now, all of a sudden your config
properties are not available until that call comes back. This can cause some awkward uses based on
how/when you need your environment config.</p>
<p>To play with this idea, I wrote this <em>unreleased</em> npm package. Check it out if you are interested
and provide feedback or make a pull request!
<a href="https://github.com/ryanoglesby08/xhr-env-provider">xhr-env-provider</a></p>
<h2>Build your application with configuration variables as constants at <em>compile time</em>.</h2>
<p>This is probably the most straight-forward option, and uses your build tool to inject constants into
your code as global variables at compile time. The
<a href="https://github.com/webpack/docs/wiki/list-of-plugins#defineplugin">DefinePlugin</a> is the best way to
do this if you are bundling your app with webpack.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token comment">## building your app</span>

<span class="token function">export</span> API_URL<span class="token operator">=</span><span class="token string">"http://dev.my-api.some-domain.com"</span>
webpack --define process.env.API_URL<span class="token operator">=</span><span class="token string">"'<span class="token variable">$API_URL</span>'"</span></code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// inside your application code</span>

<span class="token keyword">const</span> apiUrl <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">API_URL</span> <span class="token operator">||</span> <span class="token string">'http://localhost:8080'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span></code></pre>
      </div>
<p>The downside with this approach is that if your configuration varies for each deployed environment
(which it surely will), you will have to build multiple versions of your app. This is less than
ideal, as it adds extra steps to your build and deploy process. It also means that the asset you use
in lower environments (dev) is not the same as the asset you use in production, because you have
re-compiled it.</p>
<p>However, it is likely that you will compile different versions of your app anyway. For example, you
probably won’t enable source maps for your production build. Webpack support this concept.
<a href="http://webpack.github.io/docs/cli.html#development-shortcut-d">http://webpack.github.io/docs/cli.html#development-shortcut-d</a></p>
<p>This technique is best suited for externalizing configuration that does not change throughout your
build and deploy process. Turning console logging on/off, for example. Locally, you may want console
logging to be on, but in all deployed environments you may not want to be doing that.</p>
<h2>Use server-side templating to inject configuration at <em>render time</em>.</h2>
<p>In other words, just throw some globals into the <code class="language-text">window</code> object when the page is initially
rendered. Here is an example using <a href="https://pugjs.org">Pug</a> (formerly known as Jade)</p>
<div class="gatsby-highlight">
      <pre class="language-pug"><code class="language-pug"><span class="token markup"><span class="token comment">&lt;!-- views/index.pug --></span></span>

<span class="token doctype">doctype html</span>
<span class="token tag">html<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">lang</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"en"</span></span><span class="token punctuation">)</span></span></span>
  <span class="token tag">head</span>
    <span class="token tag">title</span> <span class="token plain-text">My App</span>
  <span class="token tag">body</span>
    <span class="token tag">div<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"app"</span></span><span class="token punctuation">)</span></span></span>

    <span class="token tag">script<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"text/javascript"</span></span><span class="token punctuation">)</span></span></span><span class="token punctuation">.</span><span class="token multiline-script">
<span class="gatsby-highlight-code-line">      window<span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token constant">API_URL</span><span class="token punctuation">:</span> <span class="token string">"#{API_URL}"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span>
    <span class="token tag">script<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"/app.js"</span></span><span class="token punctuation">)</span></span></span></code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// server.js</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">8080</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/assets'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'pug'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token constant">API_URL</span><span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">API_URL</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span></code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-bash"><code class="language-bash"><span class="token comment"># running the server</span>

<span class="token function">export</span> API_URL<span class="token operator">=</span><span class="token string">"http://dev.my-api.some-domain.com"</span>
node server.js</code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// app.js</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The API_URL is: '</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token constant">API_URL</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Two things here that are not so great. First, we are creating global state again. Second, we have to
introduce a dependency on a templating engine. This means we can no longer just serve our client
application as static assets. With option #1, we could have used something like Amazon S3 to deliver
our client app, while now we have to maintain our own server in order to do the templating.</p>
<p>This approach has more of an old-school feel to it with the server-side templating and the global
window variable.</p>
<p>It might be fine for you though if you are already using server-side templating. This is pretty much
the way I did it in the last Rails app I worked on (back in 2014).</p>
<h2>Conclusion</h2>
<p>I think being able to injecting env properties at runtime is the way to go for large-scale
production applications, as it gives you the most flexible options for local development and
deployments. But, if you want a quick win for a side-project or small app, injecting at compile time
is super easy. I probably wouldn’t use the server-side templating unless I was working on an
application that was already doing that.</p></section><ul class="css-nluxrg efg5lmx0" data-reactid="43"><li data-reactid="44"><a rel="prev" href="/harmonious-stylesheets-and-inline-styles-in-react/" data-reactid="45"><!-- react-text: 46 -->← <!-- /react-text --><!-- react-text: 47 -->Harmonious Stylesheets and Inline Styles in React<!-- /react-text --></a></li><li data-reactid="48"><a rel="next" href="/its-not-magic-you-just-dont-understand-it-yet/" data-reactid="49"><!-- react-text: 50 -->It&#x27;s not magic, you just don&#x27;t understand it yet<!-- /react-text --><!-- react-text: 51 --> →<!-- /react-text --></a></li></ul><div title="On Injecting a JavaScript Environment" data-reactid="52"><div id="disqus_thread" data-reactid="53"></div><noscript data-reactid="54"><span data-reactid="55"><!-- react-text: 56 -->Please enable JavaScript to view the<!-- /react-text --><a href="http://disqus.com/?ref_noscript" data-reactid="57">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid="58"><!-- react-text: 59 -->Blog comments powered by <!-- /react-text --><span class="logo-disqus" data-reactid="60">Disqus</span><!-- react-text: 61 -->.<!-- /react-text --></a></div></div></main><footer data-reactid="62"><hr data-reactid="63"/><nav class="css-1mqwiuu egg11me0" data-reactid="64"><ul class="css-g96o0e egg11me1" data-reactid="65"><li data-reactid="66"><a href="/" data-reactid="67">Blog</a></li><li data-reactid="68"><a href="/about" data-reactid="69">Me</a></li></ul><ul class="css-g96o0e egg11me1" data-reactid="70"><li data-reactid="71"><a href="https://github.com/ryanoglesby08" class="css-gokeqi egg11me2" data-reactid="72"><svg id="icon-61" width="16" height="16" viewBox="0 0 16 16" fill="#000000" role="link" aria-labelledby="icon-61_title icon-61_description" data-reactid="73"><title id="icon-61_title" data-reactid="74">Github</title><desc id="icon-61_description" data-reactid="75">The Github logo is an octocat.</desc><path d="M8 0.198c-4.418 0-8 3.582-8 8 0 3.535 2.292 6.533 5.471 7.591 0.4 0.074 0.547-0.174 0.547-0.385 0-0.191-0.008-0.821-0.011-1.489-2.226 0.484-2.695-0.944-2.695-0.944-0.364-0.925-0.888-1.171-0.888-1.171-0.726-0.497 0.055-0.486 0.055-0.486 0.803 0.056 1.226 0.824 1.226 0.824 0.714 1.223 1.872 0.869 2.328 0.665 0.072-0.517 0.279-0.87 0.508-1.070-1.777-0.202-3.645-0.888-3.645-3.954 0-0.873 0.313-1.587 0.824-2.147-0.083-0.202-0.357-1.015 0.077-2.117 0 0 0.672-0.215 2.201 0.82 0.638-0.177 1.322-0.266 2.002-0.269 0.68 0.003 1.365 0.092 2.004 0.269 1.527-1.035 2.198-0.82 2.198-0.82 0.435 1.102 0.162 1.916 0.079 2.117 0.513 0.56 0.823 1.274 0.823 2.147 0 3.073-1.872 3.749-3.653 3.947 0.287 0.248 0.543 0.735 0.543 1.481 0 1.070-0.009 1.932-0.009 2.195 0 0.213 0.144 0.462 0.55 0.384 3.177-1.059 5.466-4.057 5.466-7.59 0-4.418-3.582-8-8-8z" data-reactid="76"></path></svg></a></li><li data-reactid="77"><a href="https://twitter.com/ryanoglesby08" class="css-gokeqi egg11me2" data-reactid="78"><svg id="icon-62" width="16" height="16" viewBox="0 0 16 16" fill="#000000" role="link" aria-labelledby="icon-62_title icon-62_description" data-reactid="79"><title id="icon-62_title" data-reactid="80">Twitter</title><desc id="icon-62_description" data-reactid="81">The Twitter logo is a small bird in flight.</desc><path d="M16 3.538c-0.588 0.263-1.222 0.438-1.884 0.516 0.678-0.406 1.197-1.050 1.444-1.816-0.634 0.375-1.338 0.65-2.084 0.797-0.6-0.638-1.453-1.034-2.397-1.034-1.813 0-3.281 1.469-3.281 3.281 0 0.256 0.028 0.506 0.084 0.747-2.728-0.138-5.147-1.444-6.766-3.431-0.281 0.484-0.444 1.050-0.444 1.65 0 1.138 0.578 2.144 1.459 2.731-0.538-0.016-1.044-0.166-1.488-0.409 0 0.013 0 0.028 0 0.041 0 1.591 1.131 2.919 2.634 3.219-0.275 0.075-0.566 0.116-0.866 0.116-0.212 0-0.416-0.022-0.619-0.059 0.419 1.303 1.631 2.253 3.066 2.281-1.125 0.881-2.538 1.406-4.078 1.406-0.266 0-0.525-0.016-0.784-0.047 1.456 0.934 3.181 1.475 5.034 1.475 6.037 0 9.341-5.003 9.341-9.341 0-0.144-0.003-0.284-0.009-0.425 0.641-0.459 1.197-1.038 1.637-1.697z" data-reactid="82"></path></svg></a></li><li data-reactid="83"><a href="https://www.linkedin.com/in/ryanoglesby08" class="css-gokeqi egg11me2" data-reactid="84"><svg id="icon-63" width="16" height="16" viewBox="0 0 16 16" fill="#000000" role="link" aria-labelledby="icon-63_title icon-63_description" data-reactid="85"><title id="icon-63_title" data-reactid="86">Linked In</title><desc id="icon-63_description" data-reactid="87">The Linked In logo is the word in displayed in lower case text inside of a square.</desc><path d="M6 6h2.767v1.418h0.040c0.385-0.691 1.327-1.418 2.732-1.418 2.921 0 3.461 1.818 3.461 4.183v4.817h-2.885v-4.27c0-1.018-0.021-2.329-1.5-2.329-1.502 0-1.732 1.109-1.732 2.255v4.344h-2.883v-9z M1 6h3v9h-3v-9z M4 3.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5z" data-reactid="88"></path></svg></a></li><li data-reactid="89"><a href="/rss.xml" class="css-gokeqi egg11me2" data-reactid="90"><svg id="icon-64" width="16" height="16" viewBox="0 0 16 16" fill="#000000" role="link" aria-labelledby="icon-64_title icon-64_description" data-reactid="91"><title id="icon-64_title" data-reactid="92">RSS Feed</title><desc id="icon-64_description" data-reactid="93">The RSS Feed logo is .</desc><path d="M2.13 11.733c-1.175 0-2.13 0.958-2.13 2.126 0 1.174 0.955 2.122 2.13 2.122 1.179 0 2.133-0.948 2.133-2.122-0-1.168-0.954-2.126-2.133-2.126zM0.002 5.436v3.067c1.997 0 3.874 0.781 5.288 2.196 1.412 1.411 2.192 3.297 2.192 5.302h3.080c-0-5.825-4.739-10.564-10.56-10.564zM0.006 0v3.068c7.122 0 12.918 5.802 12.918 12.932h3.076c0-8.82-7.176-16-15.994-16z" data-reactid="94"></path></svg></a></li></ul></nav></footer><span style="display:block;clear:both;" data-reactid="95"> </span></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-a6c07b7deb9b1f9afbf4.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","148510041631291":"component---src-templates-redirect-js-aad810acf6fa3f52e446.js","107818501498521":"component---src-templates-blog-post-js-df45eb35ee57dbfd9688.js","10991734084388":"component---src-pages-about-index-js-f0ef60773ab3840dea8a.js","35783957827783":"component---src-pages-index-js-13c83caee39a20dbeff6.js","60335399758886":"path----131f9aef94525eeb6ecd.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","280596846004817":"path---css-javascript-react-2017-11-17-exposing-css-hidden-complexities-with-react-html-75c9b1885a21695cf7a4.js","46874604197638":"path---css-javascript-2017-05-25-the-state-of-css-html-8cd40eeadcb3fc9008d7.js","71564698225178":"path---javascript-2017-05-11-conceptualizing-how-a-modern-single-page-app-is-served-html-e0d55da63a4e75f50835.js","155734028338247":"path---javascript-testing-2017-03-03-an-exploration-of-javascript-builders-html-5d23c38852db64d3c607.js","251324743372953":"path---2016-11-19-its-not-magic-you-just-dont-understand-it-yet-html-caabaab1f053fd394684.js","24764743518820":"path---javascript-2016-11-04-on-injecting-a-javascript-environment-html-c9951be8c3f4278a2884.js","60248466001322":"path---javascript-react-css-2016-10-15-harmonious-stylesheets-and-inline-styles-in-react-html-72c497807a3b076fef67.js","212813674641492":"path---docker-2016-09-26-homogeneous-pipelines-with-docker-html-cbab6e36288ed32caed3.js","205155637610748":"path---java-testing-patterns-2016-06-26-how-your-mother-can-help-you-build-cleaner-unit-tests-part-iii-html-db272479583e5aee6228.js","127377794875347":"path---java-testing-patterns-2016-06-25-how-your-mother-can-help-you-build-cleaner-unit-tests-part-ii-html-3ef4f21916650b4c424c.js","113205443424959":"path---java-testing-patterns-2016-06-23-how-your-mother-can-help-you-build-cleaner-unit-tests-part-i-html-2ac72f3303bfc2759ba0.js","243488918437468":"path---design-patterns-2016-02-12-yagni-aint-a-design-principle-html-6e5929ef508a48a83a44.js","169821813984949":"path---agile-teams-2016-01-23-youre-a-champion-html-df126e7095fc15747554.js","182107340200667":"path---databases-2015-08-15-database-migrations-best-practices-html-d743adb4405d52bca346.js","138025483271094":"path---agile-teams-2015-07-26-hackathons-for-the-enterprise-html-e28c798c27517b50e07c.js","179898706621145":"path---javascript-angularjs-2015-04-07-watching-the-watchers-in-angularjs-html-680f449fe63c782b569b.js","269266961929807":"path---ruby-git-2015-02-25-easing-into-rubocop-with-git-html-9c531cdacf79ab1398fe.js","219797160332938":"path---agile-teams-facilitation-2015-01-26-how-to-support-apprentices-on-an-agile-development-team-html-146a50959c7887cd5331.js","244010397282595":"path---javascript-jasmine-html-5-testing-2014-08-29-testing-jasvascript-web-workers-with-jasmine-html-a2b78f6ac351a2501923.js","272926276761813":"path---conferences-2014-05-26-goto-chicago-2014-experience-report-html-21a8b8e0e467f675e501.js","23238933833314":"path---ruby-patterns-2013-12-25-meet-lazydoc-html-8b7351a33e5272124ffe.js","206749088810534":"path---rails-i-18-n-2013-01-29-fun-with-rails-i-18-n-html-f191c860b8978140440f.js","145127759869564":"path---rails-hashie-rspec-testing-2012-12-26-rails-controller-specs-dont-always-play-nice-with-hashie-html-9463bc632890b914b81a.js","158484320857906":"path---software-development-is-a-team-sport-03133c33fe1af57a570c.js","42861642506013":"path---exposing-css-hidden-complexities-with-react-dfbdb0521b537ba26eb1.js","83506780613913":"path---the-state-of-css-a0f0164281681b80835a.js","258723805815896":"path---conceptualizing-how-a-modern-single-page-app-is-served-4d09dd32655a3510e9aa.js","140180258595172":"path---an-exploration-of-javascript-builders-cc0c8aa9d37dc0a914ba.js","192734042294956":"path---its-not-magic-you-just-dont-understand-it-yet-df741f00e3e5606651c1.js","40482816258900":"path---on-injecting-a-javascript-environment-cfaf2cd8a6cd36856cc4.js","149022572767101":"path---harmonious-stylesheets-and-inline-styles-in-react-701d455ab03e002c745b.js","256300603435411":"path---homogeneous-pipelines-with-docker-8d8537143b5b5aadc2e4.js","141672616381452":"path---how-your-mother-can-help-you-build-cleaner-unit-tests-part-iii-1e7adab51d911f2aeb7c.js","38509158652471":"path---how-your-mother-can-help-you-build-cleaner-unit-tests-part-ii-d78cb8e2164929cdd281.js","169647779648801":"path---how-your-mother-can-help-you-build-cleaner-unit-tests-part-i-582c7d8f3c121afae9d2.js","242554060836025":"path---yagni-aint-a-design-principle-152146354e4c381b0a8f.js","218504531624169":"path---youre-a-champion-91ba70912278a3ca10fd.js","211191829483336":"path---database-migrations-best-practices-42d7e5d945b14c5f4475.js","231615830158030":"path---hackathons-for-the-enterprise-dc9e8b410d128797a029.js","13881651701865":"path---watching-the-watchers-in-angularjs-8ef6c9bf00667abce7e6.js","203109261507957":"path---easing-into-rubocop-with-git-db9a22ab0121a224e3f6.js","204077152219438":"path---how-to-support-apprentices-on-an-agile-development-team-3e447cc93e552227ba56.js","62261126862743":"path---testing-jasvascript-web-workers-with-jasmine-71277b0bb58025359119.js","144987293736312":"path---goto-chicago-2014-experience-report-c226b32d1d8f826aa4c7.js","74163788938612":"path---meet-lazydoc-ba27e45feeb3328c2a2c.js","70650898739072":"path---fun-with-rails-i-18-n-0af8ef901722a2fc1387.js","226482860996225":"path---rails-controller-specs-dont-always-play-nice-with-hashie-5aa3e31cc4e77a8f5765.js","273950069227526":"path---about-e63e975ffb2208094d9a.js","142629428675168":"path---index-a446d606447fa9b0d53d.js","114276838955818":"component---src-layouts-index-js-763ba412a97c3b163683.js","230398194555629":"component---src-layouts-empty-js-ec447614576e6367f213.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-51481422-1', 'auto');
      }
      </script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-d28add18220aa81cf0d7.js","/app-a6c07b7deb9b1f9afbf4.js","/path---on-injecting-a-javascript-environment-cfaf2cd8a6cd36856cc4.js","/component---src-templates-blog-post-js-df45eb35ee57dbfd9688.js","/component---src-layouts-index-js-763ba412a97c3b163683.js"])/*]]>*/</script></body></html>